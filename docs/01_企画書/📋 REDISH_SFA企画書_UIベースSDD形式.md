# REDISH SFA 企画書

> **形式**: REDISH UIベースSDD開発手法 テンプレート準拠
> **作成日**: 2026-01-05（後付け適用）
> **原本**: `SFA_Webアプリ化_企画書・要件定義書.md`

---

## 1. 課題定義

### 1.1 解決したい課題

| 課題 | 詳細 | 影響を受ける人 |
|------|------|---------------|
| **操作性の制約** | スプレッドシートUIでの複雑なワークフロー操作 | 営業チーム全員 |
| **同時編集の制限** | 複数ユーザーでの編集競合リスク | 同時作業者 |
| **モバイル対応** | スプレッドシートのモバイル操作性の低さ | 外出先の営業担当 |
| **自動化の分散** | 13個のGASが個別に動作し、全体像が把握困難 | 管理者・開発者 |
| **エラーハンドリング** | ユーザーフレンドリーなエラー表示の欠如 | 全ユーザー |

### 1.2 課題の背景

- **既存システム**: Google SpreadsheetベースのSFA（Sales Force Automation）
- **運用期間**: 複数年の運用実績あり、業務プロセスは確立済み
- **データ資産**: リードソース5シート、営業管理シート群、分析シート群
- **自動化**: 14個のGAS（Google Apps Script）で業務自動化を実現
- **限界**: スプレッドシートUIの限界により、さらなる効率化が困難

### 1.3 課題の影響

| 影響 | 定量化 |
|------|--------|
| **操作効率低下** | 1操作あたり+2〜3クリック必要 |
| **データ競合リスク** | 月数件の編集競合発生 |
| **モバイル対応不可** | 外出先での入力作業が困難 |
| **保守性低下** | GAS修正時の影響範囲把握に時間 |

---

## 2. 解決策

### 2.1 解決機能の概要

**既存Google SpreadsheetベースのSFAをWebアプリケーションとして再構築**

| コンポーネント | 解決策 |
|---------------|--------|
| **フロントエンド** | Next.js 14 + React 18 + TypeScript |
| **UI** | Tailwind CSS + shadcn/ui（モダンUI） |
| **認証** | NextAuth.js + Google OAuth |
| **データストア** | Supabase（PostgreSQL） |
| **API** | Next.js API Routes |

### 2.2 期待する効果

| 効果 | 期待値 |
|------|--------|
| **UX向上** | 直感的なWebインターフェースで操作時間30%削減 |
| **データ整合性** | APIを通じた一元的なデータ操作でエラー90%削減 |
| **可視性向上** | ダッシュボードによるKPIリアルタイム表示 |
| **拡張性** | 将来的な機能追加が容易 |
| **モバイル対応** | レスポンシブデザインで外出先でも利用可能 |

### 2.3 成功指標（KPI）

| KPI | 目標 | 測定方法 |
|-----|------|----------|
| **操作完了時間** | 30%短縮 | 主要操作の所要時間計測 |
| **データ競合** | 0件/月 | エラーログ監視 |
| **モバイル利用率** | 20%以上 | アクセスログ分析 |
| **ユーザー満足度** | 4.0/5.0以上 | 定期アンケート |

---

## 3. スコープ

### 3.1 対象ユーザー

| ユーザー種別 | 人数 | 主な操作 |
|-------------|------|----------|
| **営業担当** | 5名程度 | リード管理、架電記録、商談更新 |
| **営業マネージャー** | 1-2名 | 分析閲覧、KPI確認 |
| **管理者** | 1名 | 設定変更、マスタ管理 |

### 3.2 対象範囲（In Scope）

| 機能 | 説明 | 優先度 |
|------|------|:------:|
| **リード管理** | リード一覧・詳細・登録・更新 | 高 |
| **架電管理** | 架電履歴の記録・管理・ステータス更新 | 高 |
| **商談管理** | 商談一覧・詳細・登録・更新・確度管理 | 高 |
| **成約管理** | 成約一覧・詳細・契約連携 | 高 |
| **架電分析** | 架電結果の集計・可視化 | 中 |
| **商談分析** | 商談結果の集計・可視化 | 中 |
| **ダッシュボード** | KPIサマリー表示 | 中 |

### 3.3 対象外（Out of Scope）

| 機能 | 理由 | 将来検討 |
|------|------|:--------:|
| **PDF契約書生成** | 複雑度が高く、別フェーズで検討 | ○ |
| **外部SS同期** | 既存GASで継続運用 | △ |
| **AIによる確度予測** | 将来拡張として検討 | ○ |
| **Slack/カレンダー連携** | 将来拡張として検討 | ○ |

---

## 4. 制約条件

### 4.1 技術制約

| 制約 | 詳細 |
|------|------|
| **技術スタック** | Next.js 14, React 18, TypeScript, Tailwind CSS |
| **認証** | NextAuth.js + Google OAuth（企業ドメイン制限） |
| **データベース** | Supabase（PostgreSQL） |
| **ホスティング** | Vercel |
| **既存システム** | Supabaseへのデータ移行済み |

### 4.2 ビジネス制約

| 制約 | 詳細 |
|------|------|
| **予算** | 開発費用は最小限（AIパートナーによる開発） |
| **期限** | 明確な期限なし（品質重視） |
| **リソース** | 非エンジニアCEO + AI-CTO体制 |

### 4.3 セキュリティ制約

| 制約 | 詳細 | 対応 |
|------|------|------|
| **認証** | Google OAuth必須 | ✅ NextAuth.js実装済み |
| **認可** | RLS（Row Level Security） | ✅ Supabase RLS実装済み |
| **API保護** | 認証ガード必須 | ✅ API認証ガード実装済み |
| **anon禁止** | anonポリシー禁止 | ✅ anonポリシー削除済み |

---

## 5. 関連システム

### 5.1 連携が必要なシステム

| システム | 連携方法 | 状態 |
|----------|----------|:----:|
| **Supabase** | PostgreSQL + RLS | ✅ 連携済み |
| **Google OAuth** | NextAuth.js経由 | ✅ 連携済み |
| **Vercel** | 自動デプロイ | 🔄 準備中 |

### 5.2 データの流れ

```
【顧客ライフサイクル】

リード登録 → 架電管理 → 商談管理 → 成約管理
   ↓            ↓           ↓           ↓
Supabase    Supabase    Supabase    Supabase
(leads)     (calls)     (deals)     (contracts)
              ↓           ↓
        架電分析     商談分析
        (call_history)
```

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-05 | UIベースSDD開発手法テンプレート形式で後付け作成 |
