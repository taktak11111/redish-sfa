# 再開ガイド: REDISH_SFA

**最終更新**: 2025-12-30 14:00
**中断理由**: 開発戦略策定と学習プラン設計のため一時中断

---

## 1. 前回の状態

### ✅ 完了
- ドキュメント整理・PROJECT_CONTROL.md作成（12/19）
- フォルダ構造の整備（01_企画書〜08_引き継ぎ資料）
- 企画書・要件定義書の整備

### 🚧 作業中
- なし（ドキュメント整理後、実装フェーズに未着手）

### ❌ 未着手
- フロントエンド実装（リード/商談/架電/分析機能）
- Supabaseスキーマ実装
- RLSポリシー設定（**anonポリシー削除が必要**）
- cc-sdd / Steering導入

---

## 2. 次にやること（最大3つ）

1. **cc-sdd導入 + Steering作成**
   - `npx cc-sdd@latest --cursor --lang ja` でcc-sdd環境構築
   - `.kiro/steering/` にproduct.md, tech.md, structure.md作成

2. **anon RLSポリシー削除**
   - Supabase Dashboard → Authentication → Policies
   - `sfa.call_records` 等の anon ポリシーを削除
   - authenticated ユーザー用RLSポリシーを作成

3. **型定義生成・スキーマ確認**
   - `supabase gen types typescript` で型定義生成
   - 既存スキーマと設計書の整合性確認

---

## 3. 参照ファイル

- [[PROJECT_CONTROL.md]] - 進捗SSOT
- [[docs/01_企画書/SFA_Webアプリ化_企画書・要件定義書.md]] - 企画書・要件定義書
- [[docs/04_ルール・ガイドライン/開発ルール.md]] - 開発ルール
- [[supabase/migrations/001_initial_schema.sql]] - 現行スキーマ

---

## 4. 思い出すべきこと

- **RLSセキュリティ問題**: 現在 `anon` ポリシーが存在し、未認証ユーザーがデータにアクセス可能な状態 → 削除必須
- **Google Sheets連携**: 既存スプレッドシートとの連携も考慮（Phase 2）
- **SFA→請求連携**: 顧客マスタ統合は1月中旬目標（現時点では各システム独立で進める）

---

## 5. 環境情報

- **ブランチ**: main（要確認）
- **技術スタック**: Next.js 14, TypeScript, Supabase, TanStack Query
- **ローカル起動**: `cd frontend && npm run dev`
- **環境変数**: `.env.local` に設定必要（Supabase URL/Key, Google OAuth）

---

## 6. 本日のテストローンチ目標との接続

**1週間以内のテストローンチに向けて**:
- 本日: cc-sdd導入、RLS修正、DBスキーマ確認
- 明日以降: Steering完成、主要画面の実装再開
- ローンチ前: 認証フロー確認、基本CRUD動作確認

