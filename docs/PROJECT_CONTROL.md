# REDISH SFA システム 開発コントロールファイル

> Obsidian（docsジャンクション）から参照できるように、同内容のミラーを `docs/PROJECT_CONTROL.md` にも配置しています。
> 更新する場合は、原則としてプロジェクト直下の本ファイルを更新し、ミラーも同じ内容に保ってください。

**最終更新日**: 2025年12月19日  
**バージョン**: 1.0  
**目的**: システム開発の過程、各チャットでの作業状況、関連ファイル、更新内容を一元管理

---

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [カテゴリ別サマリー（機能と工程）](#カテゴリ別サマリー機能と工程)
3. [チャット別作業履歴](#チャット別作業履歴)
4. [機能別ファイルマップ](#機能別ファイルマップ)
5. [改訂履歴サマリー](#改訂履歴サマリー)
6. [開発ルール・ガイドライン](#開発ルールガイドライン)
7. [次のステップ・TODO](#次のステップtodo)
8. [重要な注意事項](#重要な注意事項)

---

## プロジェクト概要

### プロジェクト名
REDISH SFA システム（REDISH_SFA）

### プロジェクトの目的
既存Google SpreadsheetベースのSFA（Sales Force Automation）をWebアプリケーションとして再構築。営業活動の効率化、データ可視化、モバイル対応を実現するシステム。

### 主要技術スタック
- **フロントエンド**: Next.js 14, React 18, TypeScript, Tailwind CSS
- **認証**: NextAuth.js + Google OAuth
- **データストア**: Google Spreadsheet（既存資産活用）+ Supabase
- **API**: Google Sheets API v4
- **状態管理**: TanStack Query (React Query)
- **フォーム**: React Hook Form + Zod

### プロジェクト構造
```text
REDISH_SFA/
├── frontend/          (フロントエンドアプリケーション)
│   ├── src/
│   │   ├── app/         (Next.js App Router)
│   │   ├── components/  (Reactコンポーネント)
│   │   ├── lib/         (ユーティリティ関数、Google Sheets API連携)
│   │   └── types/       (TypeScript型定義)
│   └── package.json
├── supabase/          (Supabaseマイグレーション)
│   └── migrations/
├── docs/              (開発ドキュメント)
│   ├── 01_企画書/
│   ├── 02_詳細設計書/
│   ├── 03_実装完了報告/
│   ├── 04_ルール・ガイドライン/
│   ├── 05_デプロイ関連/
│   ├── 09_改善提案・改修履歴/
│   ├── 10_その他/
│   ├── README.md
│   └── PROJECT_CONTROL.md (Obsidian用ミラー)
├── README.md
└── PROJECT_CONTROL.md (正本)
```

### 主要機能
1. **リード管理**: リード一覧・詳細・登録
2. **商談管理**: 商談一覧・詳細・登録・更新
3. **架電管理**: 架電履歴の記録・管理
4. **契約管理**: 契約一覧・詳細・登録
5. **分析機能**: 商談分析、架電分析、フィールド分析、売上分析
6. **学習機能**: 営業スキル向上のための学習コンテンツ

---

## カテゴリ別サマリー（機能と工程）

このセクションは「いま何がどこまで進んでいて、何が未完了か」を、**機能カテゴリ × 工程カテゴリ**で最短把握するための要約です。

### カテゴリ定義

- **機能カテゴリ（上段）**: リード管理 / 商談管理 / 架電管理 / 契約管理 / 分析機能 / 学習機能 / ドキュメント・運用
- **工程カテゴリ（下段）**: 企画 / 設計 / 実装 / 検証 / 運用 / ドキュメント

### サマリー（全Cursorチャット累積）

- **対象範囲**: 各Cursorチャット内での作業のみ（外部チャットは対象外）

#### 現在の状況

- **ドキュメント・運用**
  - **企画/設計**: 企画書・要件定義書完了、UI設計進行中
  - **実装**: フロントエンド実装進行中（Next.js App Router）
  - **デプロイ**: Supabase、Vercelへのデプロイ準備中
  - **検証**: 型チェック・ビルド確認は未実施（必要に応じて実施）

### 未完了・要判断

| 種別 | 機能カテゴリ | 工程カテゴリ | 内容 | 次アクション | 関連ファイル |
|------|------------|------------|------|------------|------------|
| 未実施 | ドキュメント・運用 | 検証 | フロントエンド実装後の型チェック・ビルド確認 | `npx tsc --noEmit` を実行し、エラー0を確認。必要に応じてビルドテスト | `frontend/` |
| 未実施 | リード管理 | 実装 | リード管理機能の実装 | 設計書を基に実装 | `frontend/src/app/(auth)/leads/` |
| 未実施 | 商談管理 | 実装 | 商談管理機能の実装 | 設計書を基に実装 | `frontend/src/app/(auth)/deals/` |
| 未実施 | 架電管理 | 実装 | 架電履歴管理機能の実装 | 設計書を基に実装 | `frontend/src/app/(auth)/calls/` |
| 未実施 | 分析機能 | 実装 | 分析機能（商談・架電・フィールド・売上）の実装 | 設計書を基に実装 | `frontend/src/app/(auth)/analysis/` |

---

## チャット別作業履歴

### 2025年12月19日 - ドキュメント整理・PROJECT_CONTROL.md作成

**チャット識別子**: ドキュメント整理チャット

#### 実施内容

1. **docsフォルダの整理**
   - 既存のドキュメント構造を確認
   - 開業システムと同様の構造（01-10カテゴリ）への整理方針を決定

2. **README.mdの作成**
   - `docs/README.md` を作成
   - フォルダ構造、カテゴリ別ファイル分類、主要ドキュメント、作業フローを記載

3. **PROJECT_CONTROL.mdの作成**
   - プロジェクト直下に `PROJECT_CONTROL.md` を作成
   - プロジェクト概要、カテゴリ別サマリー、チャット別作業履歴、機能別ファイルマップの構造を整備

#### 変更ファイル
- `docs/README.md` - **新規作成**
- `PROJECT_CONTROL.md` - **新規作成**

#### 関連ドキュメント
- `docs/SFA_Webアプリ化_企画書・要件定義書.md` - 企画書・要件定義書
- `docs/架電履歴管理UI設計案.md` - UI設計案

#### 実装方針
- **開業システムとの整合性**: 開業システムと同様のドキュメント構造を採用
- **段階的整理**: 既存のドキュメント構造を維持しつつ、必要に応じて追加カテゴリを作成

#### 未完了タスク
- 既存ファイルのカテゴリ移動（必要に応じて実施）
- 型チェック・ビルド確認は未実施（必要に応じて実施）

---

## 機能別ファイルマップ

### リード管理

#### コアファイル
- `frontend/src/app/(auth)/leads/page.tsx` - リード一覧

#### 関連ドキュメント
- `docs/SFA_Webアプリ化_企画書・要件定義書.md` - 企画書・要件定義書

---

### 商談管理

#### コアファイル
- `frontend/src/app/(auth)/deals/page.tsx` - 商談一覧
- `frontend/src/components/deals/DealDetailPanel.tsx` - 商談詳細パネル
- `frontend/src/lib/sheets/deals.ts` - 商談データ取得（Google Sheets API）

#### 関連ドキュメント
- `docs/SFA_Webアプリ化_企画書・要件定義書.md` - 企画書・要件定義書

---

### 架電管理

#### コアファイル
- `frontend/src/app/(auth)/calls/page.tsx` - 架電一覧
- `frontend/src/components/calls/CallDetailPanel.tsx` - 架電詳細パネル
- `frontend/src/components/calls/CallHistoryModal.tsx` - 架電履歴モーダル
- `frontend/src/lib/sheets/calls.ts` - 架電データ取得（Google Sheets API）

#### 関連ドキュメント
- `docs/架電履歴管理UI設計案.md` - UI設計案
- `docs/SFA_Webアプリ化_企画書・要件定義書.md` - 企画書・要件定義書

---

### 契約管理

#### コアファイル
- `frontend/src/app/(auth)/contracts/page.tsx` - 契約一覧
- `frontend/src/components/contracts/ContractDetailPanel.tsx` - 契約詳細パネル

#### 関連ドキュメント
- `docs/SFA_Webアプリ化_企画書・要件定義書.md` - 企画書・要件定義書

---

### 分析機能

#### コアファイル
- `frontend/src/app/(auth)/analysis/sales/page.tsx` - 売上分析
- `frontend/src/app/(auth)/analysis/deals/page.tsx` - 商談分析
- `frontend/src/app/(auth)/analysis/calls/page.tsx` - 架電分析
- `frontend/src/app/(auth)/analysis/field/page.tsx` - フィールド分析

#### 関連ドキュメント
- `docs/企画書_商談分析_架電分析システム.md` - 分析システム企画書
- `docs/要件定義書_商談分析_架電分析_学習システム.md` - 分析システム要件定義書

---

### 学習機能

#### コアファイル
- `frontend/src/app/(auth)/learning/page.tsx` - 学習ページ

#### 関連ドキュメント
- `docs/要件定義書_商談分析_架電分析_学習システム.md` - 学習システム要件定義書

---

### Google Sheets API連携

#### コアファイル
- `frontend/src/lib/sheets/client.ts` - Google Sheets API クライアント
- `frontend/src/lib/sheets/index.ts` - Sheets API エクスポート
- `frontend/src/lib/sheets/calls.ts` - 架電データ取得
- `frontend/src/lib/sheets/deals.ts` - 商談データ取得

---

## 改訂履歴サマリー

### 最新の主要変更（2025年12月）

| 日付 | 変更内容 | 重要度 | 関連ファイル |
|------|---------|--------|------------|
| 12/19 | ドキュメント整理・PROJECT_CONTROL.md作成 | 中 | `docs/README.md`, `PROJECT_CONTROL.md` |

---

## 開発ルール・ガイドライン

### 必須参照ドキュメント

| ドキュメント | パス | 内容 |
|-------------|------|------|
| **企画書・要件定義書** | `docs/SFA_Webアプリ化_企画書・要件定義書.md` | システム企画、要件定義、機能要件、非機能要件 |
| **開発ルール** | `docs/開発ルール.md` | 開発ルール、コーディング規約 |
| **デザインシステム** | `docs/デザインシステム.md` | デザインシステム、UIガイドライン |
| **デプロイガイド** | `docs/setup_guide_supabase_vercel_github.md` | Supabase、Vercel、GitHubのセットアップガイド |
| **開発パートナーオンボーディング** | `docs/08_引き継ぎ資料/開発パートナー_オンボーディングパック.md` | 外部/協業パートナー向けの最短着手ガイド |

### 開発前チェックリスト

**新機能実装や既存機能修正前に必ず確認：**

- [ ] 企画書・要件定義書を確認した
- [ ] 開発ルールを確認した
- [ ] デザインシステムを確認した
- [ ] 既存のコンポーネントを確認（再利用可能か）
- [ ] **PROJECT_CONTROL.mdを確認した**（関連作業の有無）

---

## 次のステップ・TODO

### 進行中の作業

1. **フロントエンド実装**
   - リード管理機能の実装
   - 商談管理機能の実装
   - 架電管理機能の実装
   - 分析機能の実装

2. **Google Sheets API連携**
   - 既存スプレッドシートとの連携実装
   - データ同期機能の実装

### 今後の予定

1. **Supabase移行**
   - Google SpreadsheetからSupabaseへのデータ移行
   - マイグレーションスクリプトの作成

2. **統合テスト**
   - フロントエンド・バックエンドの統合テスト
   - 既存システムとのデータ移行テスト

---

## 重要な注意事項

### コントロールファイルの更新ルール

**このファイル（PROJECT_CONTROL.md）は、以下のタイミングで必ず更新してください：**

1. **新機能実装時**
   - 「チャット別作業履歴」セクションに作業内容を追加
   - 「機能別ファイルマップ」セクションに関連ファイルを追加
   - 「改訂履歴サマリー」セクションに変更内容を追加

2. **重要な変更時**
   - 既存機能の大幅な変更
   - アーキテクチャの変更
   - 開発ルールの変更

3. **チャット開始時**
   - 新しいチャットで作業を開始する前に、このファイルを確認
   - 関連する過去の作業を把握

4. **チャット終了時**
   - 実施した作業を「チャット別作業履歴」に記録
   - 変更したファイルをリストアップ
   - 関連ドキュメントへのリンクを追加

---

## 更新履歴

| 日付 | 更新内容 | 更新者 |
|------|---------|--------|
| 2025-12-19 | 初版作成（ドキュメント整理・PROJECT_CONTROL.md作成） | - |

---

**このファイルは、REDISH SFAシステムの開発における「唯一の真実の源（Single Source of Truth）」として機能します。**
**開発者は、このファイルを常に最新の状態に保ち、開発の過程を可視化してください。**





